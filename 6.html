<!doctype html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ù…Ù„Ú©Ù‡ â€” Ø¨Ø±Ú¯Ù‡ Ø§Ù…Ø±ÙˆØ²</title>
<meta name="robots" content="noindex,nofollow">
<style>
:root{
  --gold:#d8b35a;
  --muted:#c7bdb3;
  --velvet1: radial-gradient(circle at 20% 20%, #07122a 0%, #000814 60%);
  --velvet2: radial-gradient(circle at 80% 20%, #081028 0%, #020412 60%);
  --velvet3: radial-gradient(circle at 30% 30%, #0b1630 0%, #000817 65%);
  --velvet4: radial-gradient(circle at 70% 40%, #081218 0%, #02080b 65%);
  --gold-shadow: 0 10px 30px rgba(216,179,90,0.18);
  --card-bg: rgba(255,255,255,0.025);
}

/* Ù¾Ø§ÛŒÙ‡ */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: "IRANSans", "Vazirmatn", Tahoma, Arial, sans-serif;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding:22px;
  color:#fff;
  background:var(--velvet1);
  transition:background 800ms ease;
}

/* Ø¸Ø±Ù Ø§ØµÙ„ÛŒ */
.container{
  width:100%;
  max-width:680px;
  margin:10px;
  text-align:center;
}

/* Ø¯Ú©Ù…Ù‡ Ø·Ù„Ø§ÛŒÛŒ Ú©Ø±ÙˆÛŒ (Sphere Glow) */
.action-wrap{margin-top:18px}
.sphere-btn{
  width:120px;
  height:120px;
  border-radius:60px;
  border:none;
  background: radial-gradient(circle at 35% 30%, #fff8d9 0%, #e8c878 25%, #c2993a 60%, #7a5b23 100%);
  box-shadow:
    0 6px 18px rgba(0,0,0,0.6),
    0 0 40px rgba(216,179,90,0.12),
    0 0 6px rgba(255,245,200,0.06) inset;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-weight:800;
  color:#120b00;
  font-size:16px;
  transition: transform .18s ease, box-shadow .18s ease;
  -webkit-tap-highlight-color: transparent;
}
.sphere-btn:active{ transform: translateY(3px) scale(.995); }
.sphere-btn:focus{ outline: none; box-shadow: 0 0 28px rgba(216,179,90,0.3); }

/* Ù¾Ø§Ù„Ø³ Ù†ÙˆØ± Ø·Ù„Ø§ÛŒÛŒ Ø§Ø·Ø±Ø§Ù Ø¯Ú©Ù…Ù‡ */
.sphere-glow{
  position:relative;
  display:inline-block;
  border-radius:999px;
  padding:8px;
}
.sphere-glow::before, .sphere-glow::after{
  content:"";
  position:absolute;
  left:50%; top:50%;
  width:160px; height:160px;
  border-radius:50%;
  transform:translate(-50%,-50%);
  pointer-events:none;
}
.sphere-glow::before{
  background: radial-gradient(circle, rgba(216,179,90,0.18) 0%, rgba(216,179,90,0.06) 35%, rgba(216,179,90,0) 60%);
  filter: blur(6px);
  animation: pulse 2200ms infinite ease-in-out;
}
.sphere-glow::after{
  background: radial-gradient(circle, rgba(216,179,90,0.06) 0%, rgba(216,179,90,0) 60%);
  filter: blur(18px);
}

@keyframes pulse{
  0%{ transform:translate(-50%,-50%) scale(.92); opacity:.85 }
  50%{ transform:translate(-50%,-50%) scale(1.05); opacity:.6 }
  100%{ transform:translate(-50%,-50%) scale(.92); opacity:.85 }
}

/* Ù…ØªÙ† Ú©ÙˆÚ†Ú© Ø²ÛŒØ± Ø¯Ú©Ù…Ù‡ */
.hint{
  color:var(--muted);
  margin-top:10px;
  font-size:14px;
}

/* Ú©Ø§Ø±Øª Ù…Ø­ØªÙˆØ§ */
.card{
  margin-top:26px;
  display:none;
  background:var(--card-bg);
  border-radius:14px;
  padding:18px 16px;
  box-shadow: var(--gold-shadow);
  border:1px solid rgba(216,179,90,0.06);
  text-align:right;
}

/* Ù†Ø¬ÙˆØ§ÛŒ Ù…Ù„Ú©Ù‡ (Ø¯Ø±Ø´Øª Ùˆ Ù…ØªÙ…Ø§ÛŒØ²) */
.whisper{
  direction:rtl;
  text-align:center;
  color:#fff3d6;
  font-weight:800;
  font-size:18px;
  margin:6px 0 14px 0;
  line-height:1.6;
  padding-bottom:10px;
  border-bottom:1px solid rgba(216,179,90,0.12);
}

/* Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø±Ø¯ÛŒÙÛŒ */
.row{
  margin:14px 0;
  font-size:16px;
  line-height:1.8;
  position:relative;
  padding-bottom:12px;
  transition: transform .35s ease, opacity .35s ease;
  opacity:0;
  transform: translateY(10px);
  text-align:right;
}
.row.show{ opacity:1; transform: translateY(0); }
.row::after{
  content:"";
  position:absolute;
  left:0; right:0; bottom:0;
  height:3px;
  border-radius:8px;
  background: linear-gradient(90deg, rgba(216,179,90,0.7), rgba(216,179,90,0));
  opacity:.95;
}

/* Ø¹Ù†ÙˆØ§Ù† ØµÙØ­Ù‡ (Ù†Ù‡ Ú©Ù„Ù…Ù‡â€ŒÛŒ "ÙØ§Ù„") */
.header-title{
  color:var(--gold);
  font-size:22px;
  font-weight:800;
  margin-bottom:6px;
}

/* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ù†ØªÙ‡Ø§ÛŒÛŒ */
.actions-bottom{
  display:flex;
  justify-content:center;
  gap:10px;
  margin-top:18px;
  flex-wrap:wrap;
}
.small-btn{
  padding:10px 14px;
  border-radius:10px;
  border:1px solid rgba(216,179,90,0.12);
  background:transparent;
  color:var(--gold);
  font-weight:700;
  cursor:pointer;
}

/* Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø¨Ù‡ØªØ± */
@media (max-width:420px){
  .sphere-btn{ width:108px; height:108px; font-size:15px }
  .container{ padding:10px }
  .whisper{ font-size:16px }
  .row{ font-size:15px; margin:12px 0 }
}

/* Ú©Ù…Ú© Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù…Ø±ØªØ¨ */
.hidden{ display:none !important; }
</style>
</head>
<body>

<div class="container" role="main" aria-live="polite">
  <div class="header-title" id="title">Ø¯Ø±ÛŒØ§ÙØª Ø§Ù…Ø±ÙˆØ²</div>

  <div class="action-wrap" style="text-align:center;">
    <div class="sphere-glow" id="glow">
      <button id="openBtn" class="sphere-btn" aria-label="Ø¯Ø±ÛŒØ§ÙØª">Ø¯Ø±ÛŒØ§ÙØª</button>
    </div>
    <div class="hint">Ú©Ù„ÛŒÚ© Ú©Ù†</div>
  </div>

  <div id="card" class="card" role="region" aria-labelledby="title">
    <div id="whisper" class="whisper" aria-live="polite"></div>

    <div id="r1" class="row">ğŸ“œ <strong>Ù†Ø¸Ø± Ø­Ø§ÙØ¸:</strong> <span id="poem"></span></div>
    <div id="r2" class="row">ğŸŒ™ <strong>ØªØ¹Ø¨ÛŒØ±:</strong> <span id="meaning"></span></div>
    <div id="r3" class="row">ğŸ‘— <strong>Ø§Ø³ØªØ§ÛŒÙ„ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø±ÙˆØ²:</strong> <span id="style"></span></div>
    <div id="r4" class="row">ğŸ¾ <strong>Ø­ÛŒÙˆØ§Ù† Ø¯Ø±ÙˆÙ† ØªÙˆ:</strong> <span id="animal"></span></div>
    <div id="r5" class="row">âœ¨ <strong>ÙˆÛŒÚ˜Ú¯ÛŒ Ø´Ø§Ø¹Ø±Ø§Ù†Ù‡:</strong> <span id="trait"></span></div>
    <div id="r6" class="row">ğŸ”¢ <strong>Ø¹Ø¯Ø¯ Ø´Ø§Ù†Ø³ Ø±ÙˆØ²:</strong> <span id="lucky"></span></div>
    <div id="r7" class="row">â³ <strong>Ø³Ø§Ø¹Øª Ø·Ù„Ø§ÛŒÛŒ:</strong> <span id="goldtime"></span></div>
    <div id="r8" class="row">ğŸ¨ <strong>Ø±Ù†Ú¯ Ø´Ø§Ù†Ø³:</strong> <span id="color"></span></div>

    <div class="actions-bottom" id="bottomActions" style="display:none">
      <button id="downloadBtn" class="small-btn" aria-label="Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¨Ø±Ú¯Ù‡ Ø§Ù…Ø±ÙˆØ²">â¬‡ï¸ Ø¯Ø§Ù†Ù„ÙˆØ¯</button>
      <button id="shareBtn" class="small-btn" aria-label="Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¨Ø±Ú¯Ù‡ Ø§Ù…Ø±ÙˆØ²">ğŸ“¤ Ø§Ø´ØªØ±Ø§Ú©</button>
      <a id="follow" class="small-btn" target="_blank" rel="noopener noreferrer" href="https://instagram.com/__queens_magic__">ğŸ‘‘ Ø¯Ù†Ø¨Ø§Ù„ Ú©Ù†</a>
    </div>
  </div>
</div>

<script>
/* ========== Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ (ÙØ§Ø±Ø³ÛŒ Ø¨Ø§Ø²Ø¨ÛŒÙ†ÛŒ Ø´Ø¯Ù‡) ========== */
const WHISPERS = [
  "ØµØ¯Ø§ÛŒ Ù¾Ø§ÛŒ ÙØ±ØµØª Ø¯Ø± Ø¨Ø§Øº ØªÙˆ Ø´Ù†ÛŒØ¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.",
  "Ù…Ù‡Ø±Ø¨Ø§Ù†ÛŒâ€ŒØ§ÛŒ Ø¯ÙˆØ±ØŒ Ø±Ø§Ù‡Øª Ø±Ø§ Ø±ÙˆØ´Ù† Ø®ÙˆØ§Ù‡Ø¯ Ú©Ø±Ø¯.",
  "Ù†ÙˆØ±ÛŒ Ù¾Ù†Ù‡Ø§Ù† Ø¯Ø± Ú¯ÙˆØ´Ù‡â€ŒØ§ÛŒ Ù…Ù†ØªØ¸Ø± ØªÙˆ Ø§Ø³Øª.",
  "ÛŒÚ© Ø¯Ø±Ù Ù†Ùˆ Ø¨Ù‡ Ø¢Ù‡Ø³ØªÚ¯ÛŒ Ø¨Ù‡ Ø±ÙˆÛŒØª Ø¨Ø§Ø² Ù…ÛŒâ€ŒØ´ÙˆØ¯.",
  "Ù†Ø³ÛŒÙ…ÛŒ Ø§Ø² ØªØºÛŒÛŒØ±ØŒ ÛŒØ§Ø¯Øª Ø±Ø§ Ù†ÙˆØ§Ø²Ø´ Ø®ÙˆØ§Ù‡Ø¯ Ú©Ø±Ø¯."
];

const POEMS = [
  {poem:"Ø¯ÙˆØ´ Ø¯ÛŒØ¯Ù… Ú©Ù‡ Ù…Ù„Ø§Ø¦Ú© Ø¯Ø± Ù…ÛŒØ®Ø§Ù†Ù‡ Ø²Ø¯Ù†Ø¯", meaning:"Ú¯Ø´Ø§ÛŒØ´ Ùˆ Ø±Ø­Ù…Øª Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ø¨Ù‡ Ø³Ø±Ø§ØºØª Ø®ÙˆØ§Ù‡Ø¯ Ø¢Ù…Ø¯."},
  {poem:"Ù‡Ø± Ù†ÙØ³ Ø¢ÙˆØ§Ø² Ø¹Ø´Ù‚ Ù…ÛŒâ€ŒØ±Ø³Ø¯ Ø§Ø² Ú†Ù¾ Ùˆ Ø±Ø§Ø³Øª", meaning:"Ù†Ø´Ø§Ù†Ù‡â€ŒØ§ÛŒ Ø§Ø² Ù†Ø²Ø¯ÛŒÚ©ÛŒÙ Ø®ÙˆØ´ÛŒ Ùˆ Ø§Ø±ØªØ¨Ø§Ø· Ù†Ùˆ Ø¯Ø± Ø±Ø§Ù‡ Ø§Ø³Øª."},
  {poem:"Ú¯ÙØªÙ… ØºÙ… ØªÙˆ Ø¯Ø§Ø±Ù…ØŒ Ú¯ÙØªØ§ ØºÙ…Øª Ø³Ø±Ø¢ÛŒØ¯", meaning:"ØµØ¨ÙˆØ±ÛŒ Ú©Ù‡ Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯ÛŒØŒ Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ Ø´ÛŒØ±ÛŒÙ† Ø®ÙˆØ§Ù‡Ø¯ Ø¯Ø§Ø´Øª."},
  {poem:"Ø³Ø§Ù‚ÛŒØ§ Ø¢Ù…Ø¯Ù† Ø¹ÛŒØ¯ Ù…Ø¨Ø§Ø±Ú© Ø¨Ø§Ø¯Øª", meaning:"Ø¢ØºØ§Ø²ÛŒ Ù†Ùˆ Ùˆ Ø¯Ù„â€ŒÙ¾Ø°ÛŒØ± Ù†Ø²Ø¯ÛŒÚ© Ø§Ø³Øª."},
  {poem:"Ø¯Ø± Ø§Ø²Ù„ Ù¾Ø±ØªÙˆ Ø­Ø³Ù†Øª Ø² ØªØ¬Ù„ÛŒ Ø¯Ù… Ø²Ø¯", meaning:"Ù†ÙˆØ± ØªØ§Ø²Ù‡â€ŒØ§ÛŒ Ø¨Ø± Ù…Ø³ÛŒØ±Øª ØªØ§Ø¨ÛŒØ¯Ù‡ Ø§Ø³Øª."}
];

const ANIMALS = [
  {name:"Ø´ÛŒØ±", trait:"ØºØ±Ø´ÛŒ Ø¯Ø±ÙˆÙ†Øª Ø¯Ø§Ø±Ø¯ Ú©Ù‡ Ø±Ø§Ù‡Ù Ù¾ÛŒØ´Ø±Ùˆ Ø±Ø§ Ù…ÛŒâ€ŒÚ¯Ø´Ø§ÛŒØ¯."},
  {name:"Ø±ÙˆØ¨Ø§Ù‡", trait:"Ø°Ú©Ø§ÙˆØªØª Ú†ÙˆÙ† Ù†Ø³ÛŒÙ…ØŒ Ú¯Ø±Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø§Ø² Ù…ÛŒâ€ŒÚ©Ù†Ø¯."},
  {name:"Ø¹Ù‚Ø§Ø¨", trait:"Ø¯ÛŒØ¯ÛŒ Ø¨Ù„Ù†Ø¯ Ø¯Ø§Ø±ÛŒØ› Ø­Ù‚ÛŒÙ‚Øª Ø±Ø§ Ø²ÙˆØ¯ØªØ± Ø§Ø² Ø¯ÛŒÚ¯Ø±Ø§Ù† Ù…ÛŒâ€ŒØ®ÙˆØ§Ù†ÛŒ."},
  {name:"Ú¯Ø±Ú¯", trait:"ÙˆÙØ§Ø¯Ø§Ø±ÛŒ Ùˆ Ø§Ø³ØªÙ‚Ø§Ù…ØªØª Ø±ÛŒØ´Ù‡â€ŒØ¯Ø§Ø± Ùˆ Ø³ØªØ±Ú¯ Ø§Ø³Øª."},
  {name:"Ù‚Ùˆ", trait:"Ù„Ø·Ø§ÙØª Ùˆ ÙˆÙ‚Ø§Ø±ØªØŒ Ø¯Ù„â€ŒÙ‡Ø§ Ø±Ø§ Ø¢Ø±Ø§Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯."}
];

const COLORS = ["Ø·Ù„Ø§ÛŒÛŒ","Ù…Ø´Ú©ÛŒ","Ø¨Ù†ÙØ´","ÙÛŒØ±ÙˆØ²Ù‡â€ŒØ§ÛŒ","Ø²Ù…Ø±Ø¯ÛŒ","Ù†Ù‚Ø±Ù‡â€ŒØ§ÛŒ","Ø¢Ø¨ÛŒ Ø¯Ø±ÛŒØ§","ÛŒØ§Ù‚ÙˆØªÛŒ"];
const STYLES = [
  "Ù¾ÛŒØ±Ø§Ù‡Ù† Ù…ÛŒÙ†ÛŒÙ…Ø§Ù„ Ø¨Ø§ Ú¯Ø±Ø¯Ù†Ø¨Ù†Ø¯ Ù†Ù‚Ø±Ù‡â€ŒØ§ÛŒ Ùˆ Ø¹Ø·Ø± Ú¯Ù„â€ŒÙ‡Ø§ÛŒ Ø³ÙÛŒØ¯",
  "Ú©Øª Ú©Ú˜ÙˆØ§Ù„ Ø¨Ø§ Ø¯Ø³ØªØ¨Ù†Ø¯ Ú†Ø±Ù…ÛŒ Ùˆ Ø±Ø§ÛŒØ­Ù‡ Ù…Ø±Ú©Ø¨Ø§Øª",
  "Ø§Ø³ØªØ§ÛŒÙ„ Ø±Ø³Ù…ÛŒ Ø³Ø§Ø¯Ù‡ Ø¨Ø§ Ú¯ÙˆØ´ÙˆØ§Ø±Ù‡ Ø¸Ø±ÛŒÙ Ùˆ Ø¹Ø·Ø± ØµÙ†Ø¯Ù„"
];

/* ========== Ú©Ù…Ú©â€ŒÙ‡Ø§ ========== */
function rand(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
function randInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }
function fmtTime(min){ const h=Math.floor(min/60), m=min%60; return String(h).padStart(2,"0")+":"+String(m).padStart(2,"0"); }

/* ========== Ø­ÙØ¸ Ø¨Ø±Ú¯Ù‡Ù” Ø±ÙˆØ²Ø§Ù†Ù‡ Ø¯Ø± localStorage (ÛŒÚ© Ø¨Ø§Ø± Ø¯Ø± Ø±ÙˆØ²) ========== */
const KEY = "queens_sheet_v2";
function todayKey(){
  const d=new Date(); return d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();
}
function loadSaved(){
  try{
    const raw = localStorage.getItem(KEY);
    if(!raw) return null;
    const obj = JSON.parse(raw);
    if(obj.date === todayKey()) return obj;
    return null;
  }catch(e){ return null; }
}
function save(obj){
  obj.date = todayKey();
  localStorage.setItem(KEY, JSON.stringify(obj));
}

/* ========== ØªÙˆÙ„ÛŒØ¯ Ø¨Ø±Ú¯Ù‡ ØªØµØ§Ø¯ÙÛŒ ========== */
function createSheet(){
  const poem = rand(POEMS);
  const animal = rand(ANIMALS);
  const style = rand(STYLES);
  const color = rand(COLORS);
  const lucky = randInt(1,12);
  const start = randInt(8*60,20*60);
  const end = Math.min(start + randInt(60,180), 23*60);
  return {
    whisper: rand(WHISPERS),
    poem: poem.poem,
    meaning: poem.meaning,
    style,
    animal: animal.name,
    trait: animal.trait,
    color,
    lucky,
    goldtime: fmtTime(start) + " ØªØ§ " + fmtTime(end)
  };
}

/* ========== Ø§Ø¹Ù…Ø§Ù„ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡Ù” Ù…Ø®Ù…Ù„ÛŒ ØªØµØ§Ø¯ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø±ÙˆØ² ========== */
(function setVelvetBG(){
  const keyBG = "queens_bg_v2";
  const opts = ["--velvet1","--velvet2","--velvet3","--velvet4"];
  try{
    const raw = localStorage.getItem(keyBG);
    const today = new Date().toDateString();
    if(raw){
      const obj = JSON.parse(raw);
      if(obj.date === today){
        document.documentElement.style.setProperty("background", "var("+obj.bg+")");
        return;
      }
    }
    const pick = opts[Math.floor(Math.random()*opts.length)];
    localStorage.setItem(keyBG, JSON.stringify({date: new Date().toDateString(), bg: pick}));
    document.documentElement.style.setProperty("background", "var("+pick+")");
  }catch(e){}
})();

/* ========== Ù†Ù…Ø§ÛŒØ´ ØªØ±ØªÛŒØ¨ÛŒ Ùˆ Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ ========== */
const openBtn = document.getElementById("openBtn");
const card = document.getElementById("card");
const whisperEl = document.getElementById("whisper");
const ids = ["r1","r2","r3","r4","r5","r6","r7","r8"];
const elems = ids.map(id=>document.getElementById(id));
const bottomActions = document.getElementById("bottomActions");

function populateAndShow(sheet){
  whisperEl.textContent = "ğŸ”® Ù†Ø¬ÙˆØ§ÛŒ Ù…Ù„Ú©Ù‡: " + sheet.whisper;
  document.getElementById("poem").textContent = sheet.poem;
  document.getElementById("meaning").textContent = sheet.meaning;
  document.getElementById("style").textContent = sheet.style;
  document.getElementById("animal").textContent = sheet.animal;
  document.getElementById("trait").textContent = sheet.trait;
  document.getElementById("lucky").textContent = sheet.lucky;
  document.getElementById("goldtime").textContent = sheet.goldtime;
  document.getElementById("color").textContent = sheet.color;

  // Ù†Ù…Ø§ÛŒØ´ Ú©Ø§Ø±Øª Ùˆ Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ ØªØ±ØªÛŒØ¨ÛŒ
  card.style.display = "block";
  elems.forEach(e=>{ e.classList.remove("show"); });
  let idx=0;
  function step(){
    if(idx>=elems.length) {
      // Ù†Ù…Ø§ÛŒØ´ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒÛŒÙ† Ø¨Ø¹Ø¯ Ø§Ø² Ø§ØªÙ…Ø§Ù…
      document.getElementById("bottomActions").style.display = "flex";
      return;
    }
    elems[idx].classList.add("show");
    idx++;
    setTimeout(step,420);
  }
  step();
}

/* ========== Ú©Ù„ÛŒÚ© Ø¯Ú©Ù…Ù‡: Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ÛŒØ§ Ø³Ø§Ø®Øª Ø¨Ø±Ú¯Ù‡ Ùˆ Ù†Ù…Ø§ÛŒØ´ ========== */
openBtn.addEventListener("click", function(){
  // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ú©ÙˆÚ†Ú©
  openBtn.animate([{transform:"translateY(0) scale(1)"},{transform:"translateY(-6px) scale(1.02)"},{transform:"translateY(0) scale(1)"}], {duration:420});

  const saved = loadSaved();
  if(saved){
    populateAndShow(saved);
    return;
  }
  const sheet = createSheet();
  save(sheet);
  populateAndShow(sheet);
});

/* ========== Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¨Ø±Ú¯Ù‡ Ø§Ù…Ø±ÙˆØ² ========== */
document.getElementById("downloadBtn").addEventListener("click", function(){
  const lines = [
    "Ù†Ø¬ÙˆØ§ÛŒ Ù…Ù„Ú©Ù‡: " + document.getElementById("whisper").innerText.replace("ğŸ”® Ù†Ø¬ÙˆØ§ÛŒ Ù…Ù„Ú©Ù‡: ",""),
    "Ù†Ø¸Ø± Ø­Ø§ÙØ¸: " + document.getElementById("poem").innerText,
    "ØªØ¹Ø¨ÛŒØ±: " + document.getElementById("meaning").innerText,
    "Ø§Ø³ØªØ§ÛŒÙ„ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø±ÙˆØ²: " + document.getElementById("style").innerText,
    "Ø­ÛŒÙˆØ§Ù† Ø¯Ø±ÙˆÙ† ØªÙˆ: " + document.getElementById("animal").innerText,
    "ÙˆÛŒÚ˜Ú¯ÛŒ Ø´Ø§Ø¹Ø±Ø§Ù†Ù‡: " + document.getElementById("trait").innerText,
    "Ø¹Ø¯Ø¯ Ø´Ø§Ù†Ø³ Ø±ÙˆØ²: " + document.getElementById("lucky").innerText,
    "Ø³Ø§Ø¹Øª Ø·Ù„Ø§ÛŒÛŒ: " + document.getElementById("goldtime").innerText,
    "Ø±Ù†Ú¯ Ø´Ø§Ù†Ø³: " + document.getElementById("color").innerText
  ];
  const blob = new Blob([lines.join("\n")], {type:'text/plain;charset=utf-8'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a"); a.href = url; a.download = "Ø¨Ø±Ú¯Ù‡_Ø§Ù…Ø±ÙˆØ².txt"; a.click();
});

/* ========== Ø§Ø´ØªØ±Ø§Ú© Ú¯Ø°Ø§Ø±ÛŒ (Web Share API ÛŒØ§ fallback) ========== */
document.getElementById("shareBtn").addEventListener("click", function(){
  const text = [
    document.getElementById("whisper").innerText,
    "Ù†Ø¸Ø± Ø­Ø§ÙØ¸: " + document.getElementById("poem").innerText,
    "ØªØ¹Ø¨ÛŒØ±: " + document.getElementById("meaning").innerText,
    "Ø­ÛŒÙˆØ§Ù† Ø¯Ø±ÙˆÙ† ØªÙˆ: " + document.getElementById("animal").innerText,
    "Ø¹Ø¯Ø¯ Ø´Ø§Ù†Ø³ Ø±ÙˆØ²: " + document.getElementById("lucky").innerText
  ].join("\n");
  if(navigator.share){
    navigator.share({title: "Ø¨Ø±Ú¯Ù‡ Ø§Ù…Ø±ÙˆØ²", text});
  } else {
    prompt("Ù…ØªÙ† Ø±Ø§ Ú©Ù¾ÛŒ Ú©Ù†:", text);
  }
});

/* ========== Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² ØªÚ©Ø±Ø§Ø± Ø¢Ù†ÛŒ (Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ù‚Ø¨Ù„ Ø§Ø² Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ú©Ù„ÛŒÚ© Ú©Ù†Ø¯) ========== */
openBtn.addEventListener("dblclick", function(e){ e.preventDefault(); });

</script>
</body>
</html>
